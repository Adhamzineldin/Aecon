
<div class="view" id="add-view">
    <div class="row align-items-center"  style="height:50px">
        <div class="col-12 my-auto d-flex align-items-center" >
            <div><h6 class="text-muted" style="margin:0">Edit</h6></div>

            <ul class="nav" style="margin-left:20px;">
                <li><a class="btn nav-button sub-view-nav selected" data-view="add-view" data-sub-view="atc-basic-overview">Project</a></li>
                <li><a class="btn nav-button sub-view-nav" data-view="existing-view" data-sub-view="atc-basic-volumes">Client</a></li>
                <li><a class="btn nav-button sub-view-nav" data-view="existing-view" data-sub-view="edit-api">API</a></li>
                <li><a class="btn nav-button sub-view-nav" data-view="existing-view" data-sub-view="edit-location">Location</a></li>
            </ul>
        </div>
    </div>


    <div class="sub-view  d-none" id="edit-api" >
        <div class="row" style=";width:100%;height:100%">
            <div class="col-12 col-lg-5" style="height:100%">
                <div class="card header-shadow" style="max-height:100%">
                    <h5 class="card-header  bg-transparent">
                        Add API
                    </h5>
                    <div class="card-body" style="overflow:auto;max-height:100%">
                        <form id="api-form" method="post">
                            {% csrf_token %}
                            <div class="form-group row">
                                <label for="apiName" class="col-12 col-lg-5 col-form-label" data-toggle="popover" title="Location field" data-content="Unique name that identifies this API">API Name</label>
                                <div class="col-12 col-lg-7">
                                  <input type="text" class="form-control" id="apiName" name="apiName">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="apiProvider" class="col-12 col-lg-5 col-form-label" data-toggle="popover" title="Unique Id field" data-content="Name of API provider, eg Vivacity.">API Provider</label>
                                <div class="col-12 col-lg-7">
                                  <select class="form-control toggle-fields" id="apiProvider" name="apiProvider">
                                      <option>Vivacity</option>

                                  </select>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="apiURL" class="col-12 col-lg-5 col-form-label" data-toggle="popover" title="Unique Id field" data-content="A String that uniquely identifies this location. For any data received via API, it should be the unique identifier of that data on the API. For uploaded data like ATCs and JTCs, it can be any unique string">API URL</label>
                                <div class="col-12 col-lg-7">
                                  <input type="text" class="form-control" id="apiURL" name="baseUrl" value="https://api.vivacitylabs.com/crt-standard/v1/counts">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="apiKey" class="col-12 col-lg-5 col-form-label" data-toggle="popover" title="Location field" data-content="Type of survey done at this location">API Key</label>
                                <div class="col-12 col-lg-7">
                                  <input type="text" class="form-control" id="apiKey" name="APIKey" value="sdjvknw94g90vnsd9842hfhn08wHVCW094YFGHW">
                                </div>
                            </div>


                        </form>

                        <div class="row">
                            <div class="col-lg-12">

                                <button class="btn btn-outline-dark" style="margin-left:auto" onclick="saveVivacityAPI('create');">Save</button>
                                <button class="btn btn-outline-dark" style="margin-left:auto" onclick="testAPI();">Test</button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="col-12 col-lg-2" style="max-height:100%">
                <div class="card header-shadow mb-3" style="max-height:50%">
                    <div class="card-header  bg-transparent">
                        <h5>Classes</h5>
                        <div class="fn-container d-flex">
                            <div class="fn text-muted" onclick="deleteButtonPressed('shift');"><i class="fa fa-plus"></i></div>
                            <div class="fn text-muted" onclick="deleteButtonPressed('shift');"><i class="fa fa-trash"></i></div>
                            <div class="fn text-muted" onclick="deleteButtonPressed('shift');"><i>G</i></div>
                        </div>

                    </div>
                    <div class="card-body" style="padding-left:0;padding-right:0">
                        <div class="col-12" style="padding:0">

                            <div class="conduit-selectable-menu multi" id="obsclass-container">
                                <ul >
                                     <li id="5day" class="menu-item">
                                        <a href="#" class="selected">

                                            <span >Pedestrian</span>
                                        </a>
                                    </li>
                                    <li id="7day" class="menu-item">
                                        <a href="#" >

                                            <span >Cyclist</span>
                                        </a>
                                    </li>
                                    <li id="Car" class="menu-item">
                                        <a href="#" >

                                            <span>Car</span>
                                        </a>
                                    </li>


                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

            </div>



            <div class="col-12 col-lg-5" style="max-height:100%">
                <div class="card header-shadow mb-3" style="height:100%">
                    <h5 class="card-header  bg-transparent">
                        API content
                    </h5>
                    <div class="card-body" style="height:100%;overflow:auto">
                        <pre>
                            <code style="width:100%" id="json-container">

                            </code>
                        </pre>
                    </div>
                </div>

            </div>




        </div>
    </div>



    <div class="sub-view" id="edit-location">
        <div class="row" style=";width:100%;height:100%">
            <div class="col-12 col-lg-5" style="height:100%">
                <div class="card header-shadow" style="max-height:100%">
                    <div class="card-header  bg-transparent">
                        <select class="form-control" id="location_id" name="location_id">
                              {% for l in locations %}
                                <option value="{{l.id}}">{{l.id}} - {{l.name}}</option>
                              {% endfor %}
                          </select>

                            <select class="form-control" id="obstype" name="obstype">
                                <option value="0">All</option>
                              {% for t in observationtypes %}
                                <option value="{{t.id}}">{{t.name}}</option>
                              {% endfor %}
                          </select>
                    <div class="fn-container">
                        <div class="fn text-muted" onclick="deleteButtonPressed('shift');" data-toggle="collapse" data-target=".multi-collapse" aria-controls="collapseExample collapseExample2"><i class="fas fa-chevron-down"></i></div>
                    </div>

                    </div>
                    <div class="card-body collapse multi-collapse" style="overflow:auto;max-height:100%" id="collapseExample">
                        <form id="location-form" enctype="multipart/form-data" method="post">
                            {% csrf_token %}
                            <div class="form-group row">
                                <label for="area" class="col-12 col-lg-5 col-form-label" data-toggle="popover" title="Location field" data-content="Geographical area or city, for grouping locations on the client dashboard. Can be left blank, but location wont appear on the dashboard">Area</label>
                                <div class="col-12 col-lg-7">
                                  <input type="text" class="form-control" id="area" name="area">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="locName" class="col-12 col-lg-5 col-form-label" data-toggle="popover" title="Location field" data-content="Eg. Street name, Site name or number">Location Name</label>
                                <div class="col-12 col-lg-7">
                                  <input type="text" class="form-control" id="locName" name="name">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="locId" class="col-12 col-lg-5 col-form-label" data-toggle="popover" title="Unique Id field" data-content="A String that uniquely identifies this location. For any data received via API, it should be the unique identifier of that data on the API. For uploaded data like ATCs and JTCs, it can be any unique string">Unique Id</label>
                                <div class="col-12 col-lg-7">
                                  <input type="text" class="form-control" id="locId" name="locId">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="observationType" class="col-12 col-lg-5 col-form-label" data-toggle="popover" title="Location field" data-content="Type of survey done at this location">Observation Type</label>
                                <div class="col-12 col-lg-7">
                                  <select class="form-control" id="observationType" name="observationType">
                                      {% for t in observationtype_list %}
                                        <option value="{{t.id}}">{{t.name}}</option>
                                      {% endfor %}
                                  </select>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="installDate" class="col-12 col-lg-5 col-form-label" data-toggle="popover" title="Location field" data-content="Date of installation of sensor, if any. Can be left blank">Install Date</label>
                                <div class="col-12 col-lg-7">
                                  <input type="date" class="form-control" id="installDate" name="installDate">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="company" class="col-12 col-lg-5 col-form-label" data-toggle="popover" title="Unique Id field" data-content="Name of API provider, eg Vivacity. Can be left blank">API Provider</label>
                                <div class="col-12 col-lg-7">
                                  <select class="form-control toggle-fields" id="company" name="company">
                                      <option>-------</option>
                                      <option>Vivacity</option>
                                      <option>Envirowatch</option>
                                  </select>
                                </div>
                            </div>

                             <div class="form-group row d-none" data-dependency="company" data-value="Vivacity">
                                <label for="selectedAPI" class="col-12 col-lg-5 col-form-label" data-toggle="popover" title="Location field" data-content="API name">API Name</label>
                                <div class="col-12 col-lg-7">
                                  <select class="form-control" id="selectedAPI" name="apiName">
                                      <option>-------</option>
                                      <option>CRT</option>
                                      <option>Tracsis Central Project</option>
                                  </select>
                                </div>
                            </div>


                            <div class="form-group row">
                                <label for="deviceId" class="col-12 col-lg-5 col-form-label" data-toggle="popover" title="Unique Id field" data-content="Sometimes needed to match data to a specific device when retrieving data from an API. Can be left blank">Device Id</label>
                                <div class="col-12 col-lg-7">
                                  <input type="text" class="form-control" id="deviceId" name="device">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="lat" class="col-12 col-lg-5 col-form-label" data-toggle="popover" title="Unique Id field" data-content="Latitude of location. Can be left blank. Can be selected from map">Latitude</label>
                                <div class="col-12 col-lg-7">
                                  <input type="text" class="form-control" id="lat" name="lat">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="lon" class="col-12 col-lg-5 col-form-label" data-toggle="popover" title="Unique Id field" data-content="Longitude of location.Can be left blank. Can be selected from map">Longitude</label>
                                <div class="col-12 col-lg-7">
                                  <input type="text" class="form-control" id="lon" name="lon">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="area" class="col-12 col-lg-5 col-form-label" data-toggle="popover" title="Location field" data-content="Image of site, eg of vivacity camera view, for display on dashboard. Can be left blank">Site Image</label>
                                <div class="col-12 col-lg-7">
                                    <div class="input-group">
                                        <div class="custom-file">
                                            <input type="file" class="custom-file-input" id="inputGroupFile01" name="imgURL"
                                              aria-describedby="inputGroupFileAddon01" onchange="updateLabel(event);">
                                            <label class="custom-file-label" for="inputGroupFile01" >Choose file</label>
                                        </div>
                                    </div>
                                </div>
                            </div>



                        </form>
                        <div class="form-group row">
                            <div class="col-lg-12">

                                <button class="btn btn-outline-dark" style="margin-left:auto" onclick="saveLocation('create');">Save</button>
                            </div>
                        </div>

                    </div>
                    <div class="card-body multi-collapse collapse show h-100" style="overflow:auto;max-height:100%;height:100%" id="collapseExample2">weeeeeee</div>
                </div>
            </div>




            <div class="col-12 col-lg-7" style="max-height:100%">
                <div class="card header-shadow  mb-3" style="height:100%">

                    <div class="card-body">
                        <div class="col-12 " id="map-wrapper" style="width:100%;height:100%;padding:0;position:relative">
                            <div class = "map-panel" id = "admin-map2">

                            </div>
                            <div class="d-flex flex-column" style="position:absolute;bottom:20px;left:20px;z-index:3002">
                                <div style="background-color:rgba(255,255,255,0.7);padding:5px;border:1px solid grey;cursor:pointer" onclick="toggle_function('marker');" id="marker"><img src="/static/tfl/marker.png" width="50" height="50"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>
</div>